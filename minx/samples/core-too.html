<!doctype html> 
<html lang="en"> 
    <head>
        <!-- meta data, as in data about data where data is this file -->
        <meta charset="utf-8">
        <meta name="description" content="Willis a simple mobile optimised widget library">
        <meta name="author" content="MoneyToolkit">

        <!-- title -->
        <title>Minx Core Sample</title> 

        <!-- styles -->
        <!-- core structural css -->
        <link rel="stylesheet" href="../source/core/style/css/geometry.css?v=1.2">
        
        <!-- lib code -->
        <script src="../source/extern/my.class.js"></script>

        <!-- core code -->
        <script src="../source/core/src/panelmanager.js"></script>
        <script src="../source/core/src/panel.js"></script>
        <script src="../source/core/src/pinnedpanel.js"></script>
        


        <!-- our main entry -->
        <script type="text/javascript" charset="utf-8">

            /* When this function is called, PhoneGap has been initialized and is ready to roll */
            function onDeviceReady() {
                console.log('onDeviceReady');
                Minx.pm.init();


                window.addEventListener('orientationchange', moveit, false);
                

                var panel = Minx.pm.add(null, 'simple');

                panel.setStyle('background-color', 'green');
                panel.setSize(1024, 1024);

                panel.show();

                var innerPanel = Minx.pm.add(panel);

                innerPanel.setStyle('background','red');
                innerPanel.setSize(1000, 1000);
                innerPanel.setPos(100, 120);
                innerPanel.show();


                var inner2Panel = Minx.pm.add(innerPanel);

                inner2Panel.setStyle('background','blue');
                inner2Panel.setSize(350, 20);
                inner2Panel.setPos(30, 40);
                inner2Panel.show();



                var inner2Panel = Minx.pm.add(innerPanel);

                inner2Panel.setStyle('background','yellow');
                inner2Panel.setSize(0, 20);
                
                inner2Panel.setPos(0, 20);
                inner2Panel.addClass("yell");
                inner2Panel.addClass("stripe");
                inner2Panel.addClass("remove");
                inner2Panel.addClass("stripe");
                inner2Panel.removeClass("remove");

                inner2Panel.setParentPin('r', 5);
                inner2Panel.setParentPin('l', 0);

                inner2Panel.show();


                var inner2Panel = Minx.pm.add(innerPanel);

                inner2Panel.setStyle('background','green');
                inner2Panel.setSize(100, 20);
                inner2Panel.setPos(0, 150);

                inner2Panel.setParentPin('l', 5);

                inner2Panel.show();



                var i2p = Minx.pm.add(innerPanel);

                i2p.setStyle('background','#666');
                i2p.setSize(185, 20);
                i2p.setPos(50, 150);
                i2p.show();

                setTimeout(function() {
                    // pn to another panel
                    i2p.setSiblingPin(inner2Panel, 'l', 10);


                    i2p.show();
                }, 2000);

                // log our panels
                Minx.pm.log();

                // remove all but one panel after 2 seconds
                setTimeout(function() {

                        inner2Panel.setParentPin('r', 100);
                        inner2Panel.show();



                        var normPanel = Minx.pm.add(panel);

                        normPanel.setStyle('background','white');
                        normPanel.setSize(100, 1000);
                        normPanel.setPos(122, 120);
                        normPanel.show();

                        var fastPanel = Minx.pm.add(panel);

                        fastPanel.setStyle('background','#AAF');
                        fastPanel.setSize(100, 1000);
                        fastPanel.setPos(100, 120);
                        
                        
                        fastPanel.show();

                        
                        
                        setTimeout(function() {
                            normPanel.setPos(800, 120);
                            
                            normPanel.show();

                            setTimeout(function() {
                                fastPanel.setPos(800, 120);
                                fastPanel.setSize(200,200);
                                

                                fastPanel.show();
                            }, 2000);
                            
                        }, 5000);

                        
                }, 20);


                function moveit() {
                           // Minx.pm.remove(inner2Panel);    // remove by panel reference
                            Minx.pm.log();

                            if(window.orientation / 90 == 0) {

                                var pan = Minx.pm.add(innerPanel);

                                pan.setStyle('background','blue');
                                pan.setSize(600, 600);
                                pan.setPos(200, 10);
                                

                                

                                    pan.setParentPin('t', 0);
                                    pan.setParentPin('b', 5);

                                    
        
                                    


                                        pan.setParentPin('r', 13);
                                        


                                        
                                            innerPanel.setParentPin('l', 10);

                                
                                        
                                    
                                            
                                                innerPanel.unPin();

                                                innerPanel.setSize(300, 900);
                                                innerPanel.setPos(400,100);

                                
                                                Minx.pm.log();

                                                
                                                    //Minx.pm.remove('pn1');      // remove by id
                                                    innerPanel.setSize(800, 1000);
                                

                                                    inner2Panel.show();
                                                    pan.show();
                                                    innerPanel.show();

                                                    Minx.pm.log();


                                } else {

                                    innerPanel.setSize(300, 100);
                                    innerPanel.setPos(40,10);
                                    innerPanel.show();

                                    
                                }
                                                    
                                                
                                                
                                        


                }


            }

        </script>

    </head>
    <body onload="onDeviceReady()" style="background-color: #ddd">
        <h3 style="font-family: arial, sans-serif; color: #bbb; text-shadow: 0px 1px 0px #fff;"> 
            core-again.html - core css, no theme, transitions. sibling pin
        </h3>
    </body>
</html>